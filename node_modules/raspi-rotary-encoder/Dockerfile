# FROM resin/armv6hf-debian
# FROM resin/qemux86-node
FROM resin/raspberry-pi-node

RUN [ "cross-build-start" ]

RUN apt-get update && apt-get install wiringpi

COPY ./package.json ./package.json
COPY ./lib ./lib
COPY ./test.js ./test.js
COPY ./tests ./tests
COPY tests/cpuinfo /proc/cpuinfo

RUN npm install --production
RUN npm install raspi

ENTRYPOINT "./tests/run-tests.sh"

RUN [ "cross-build-end" ]
